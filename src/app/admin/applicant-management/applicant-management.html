<div class="p-8">
        
<h1 class="text-3xl font-bold text-primary mb-8">Applicant Management</h1>

<div class="mb-6 p-4 bg-white rounded-lg shadow-md grid grid-cols-1 md:grid-cols-3 gap-4">
  <div>
    <label for="search" class="block text-sm font-semibold text-gray-700 mb-1">Search</label>
    <input
      type="text"
      id="search"
      [(ngModel)]="searchTerm"
      (input)="filterApplicants()"
      placeholder="Search by name or job..."
      class="mt-1 block w-full px-3 py-2 text-body border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm"
    />
  </div>

  <div>
    <label for="status" class="block text-sm font-semibold text-gray-700 mb-1">Filter by Status</label>
    <select
      id="status"
      [(ngModel)]="statusFilter"
      (change)="filterApplicants()"
      class="mt-1 block w-full px-3 py-2 text-body border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm"
    >
      <option value="">All Statuses</option>
      <option value="In Training">In Training</option>
      <option value="Passed Quiz">Passed Quiz</option>
      <option value="Pending Review">Pending Review</option>
      <option value="Failed">Failed</option>
    </select>
  </div>

  <div>
    <label for="stage" class="block text-sm font-semibold text-gray-700 mb-1">Filter by Stage</label>
    <select
      id="stage"
      [(ngModel)]="stageFilter"
      (change)="filterApplicants()"
      class="mt-1 block w-full px-3 py-2 text-body border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm"
    >
      <option value="">All Stages</option>
      <option>Certified</option>
      <option>Shortlisted</option>
      <option>Interview Scheduled</option>
      <option>Rejected</option>
    </select>
  </div>
</div>

<div class="bg-white shadow-md rounded-lg">
  <table class="w-full table-fixed divide-y divide-gray-200 text-sm">
    <thead class="bg-primary text-white text-xs">
      <tr>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[18%]">Name</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[20%]">Applied For</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[14%] hidden md:table-cell">Status</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[14%] hidden md:table-cell">Stage</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[18%]">Progress</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[10%] hidden lg:table-cell">Quiz</th>
        <th scope="col" class="px-4 py-3 text-left font-bold uppercase tracking-wider w-[16%]">Actions</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200 text-body">
      <tr *ngFor="let a of filteredApplicants" class="hover:bg-gray-50 transition-colors duration-150">
        <td class="px-4 py-3 font-medium text-gray-900 break-words whitespace-normal">{{ a.name }}</td>
        <td class="px-4 py-3 text-gray-600 break-words whitespace-normal">{{ a.appliedFor }}</td>
        <td class="px-4 py-3 hidden md:table-cell">
          <span
            class="px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full"
            [ngClass]="getStatusClass(a.status)"
          >
            {{ a.status }}
          </span>
        </td>
        <td class="px-4 py-3 hidden md:table-cell">
          <span class="px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full" [ngClass]="getStageClass(a.stage)">
            {{ a.stage }}
          </span>
        </td>
        <td class="px-4 py-3">
          <div class="w-full max-w-[140px] bg-gray-200 rounded-full h-2.5">
            <div class="bg-primary h-2.5 rounded-full" [style.width.%]="a.progress"></div>
          </div>
        </td>
        <td class="px-4 py-3 text-gray-600 hidden lg:table-cell">
          {{ a.quizScore !== null ? a.quizScore + '%' : 'N/A' }}
        </td>
        <td class="px-4 py-3 text-sm">
          <div class="flex flex-wrap gap-2">
            <button (click)="markShortlisted(a)" class="px-2 py-1 rounded-md text-xxs md:text-sm font-semibold bg-blue-400 text-white hover:bg-blue-700">Shortlist</button>
            <button (click)="scheduleInterview(a)" class="px-2 py-1 rounded-md text-xxs md:text-sm font-semibold bg-indigo-400 text-white hover:bg-indigo-700">Interview</button>
            <button (click)="markRejected(a)" class="px-2 py-1 rounded-md text-xxs md:text-sm font-semibold bg-red-400 text-white hover:bg-red-700">Reject</button>
          </div>
        </td>
      </tr>

      <tr *ngIf="filteredApplicants.length === 0">
        <td colspan="7" class="px-4 py-10 text-center text-sm text-gray-500">No applicants found matching your criteria.</td>
      </tr>
    </tbody>
  </table>
</div>
</div>